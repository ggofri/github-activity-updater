#!/bin/bash

set -euo pipefail

echo "ğŸ§ª Running pre-commit tests..."

if ! make test-all; then
    echo "âŒ Tests failed! Commit blocked."
    echo "Fix the failing tests before committing."
    exit 1
fi

if command -v shellcheck >/dev/null 2>&1; then
    echo "ğŸ” Running shellcheck..."
    if ! make lint; then
        echo "âš ï¸  Shellcheck found issues! Please fix them before committing."
        exit 1
    fi
else
    echo "âš ï¸  Shellcheck not found, skipping lint check"
fi

echo "âœ… All pre-commit checks passed!"
